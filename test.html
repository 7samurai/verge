<!doctype html>
<!--[if lte IE 8]> <html class="oldie solarized" lang="en"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="solarized" lang=en> <!--<![endif]-->
<head>
    <meta charset=utf-8>
    <link rel=dns-prefetch href=//airve.github.com>
    <title>verge // test suite</title>
    <meta name=viewport content="width=device-width,initial-scale=1.0">
    <link rel=stylesheet href="http://airve.github.com/css/packs/normalize_responsive_solarized.min.css">
    <meta name=author content="Ryan Van Etten">
    <meta name=description content="JavaScript module test page"> 
    <style>
    body{margin:1em auto;max-width:100%;width:94%;padding:0 3%}
    a{text-decoration:none;cursor:pointer}
    a:not(:hover){color:#d33682}
    code .number {color:#b58900}
    html:not(.dark) ::-moz-selection{background:#ed0;color:#002b36}
         html:not(.dark) ::selection{background:#ed0;color:#002b36}
    pre,td,th{padding:1em;text-align:left;border-left:1px solid #eed}
    td{font-weight:bold;color:#2aa198}
    td:first-child{font-weight:normal;color:#586e75}
    td:last-child{color:#dc322f}
    pre{padding:1em;background:#859900;color:#fdf6e3}
    th{font-size:140%}
    #footer{margin:2em 0;border-bottom:1em solid #ffe}
    nav ul li{display:block;float:left;margin:0 0 1em}
    nav ul li a{padding:.5em;background:#cb4b16;color:#fdf6e3!important;margin:0 1px 1em 0}
    nav ul li a:hover{color:#ffe;background:#b58900}
    [accesskey=z]{visibility:hidden;width:0;height:0}
    .offset{display:none}
    .update-toggle{background:#eee8d5}
    </style>
    <!--code.google.com/p/html5shiv/ -->
    <!--[if lt IE 9]>
        <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
</head>
<body>

    <header id="header">
        <h1><a href="http://github.com/ryanve/verge">Verge</a> Test Suite</h1>
    </header>
    
    <pre id=ua></pre>

    <div id="a"><pre>div#a</pre></div>
    
    <table id=tests>
        <tr>
            <th scope="col"><a href=#tests accesskey=s>test<br>code</a></th>
            <th scope="col"><a href=#tests>expected<br>type</a></th>
            <th scope="col"><a href=#tests>live<br>output</a></th>
        </tr>
        <tr>
            <td><code>$.inViewport(a, <span class=number>-100</span>)</code></td>
            <td><code>boolean</code></td>
            <td><code id=in-viewport-a-neg></code></td>
        </tr>
        <tr>
            <td><code>$.inViewport(a)</code></td>
            <td><code>boolean</code></td>
            <td><code id=in-viewport-a></code></td>
        </tr>
        <tr>
            <td><code>$.inViewport(a, <span class=number>100</span>)</code></td>
            <td><code>boolean</code></td>
            <td><code id=in-viewport-a-pos></code></td>
        </tr>
        <tr>
            <td><code>$.viewportW()</code></td>
            <td><code>number</code></td>
            <td><code id=viewport-w></code></td>
        </tr>
        <tr>
            <td><code>$.viewportH()</code></td>
            <td><code>number</code></td>
            <td><code id=viewport-h></code></td>
        </tr>
        <tr>
            <td><code>$.scrollX()</code></td>
            <td><code>number</code></td>
            <td><code id=scroll-x></code></td>
        </tr>
        <tr>
            <td><code>$.scrollY()</code></td>
            <td><code>number</code></td>
            <td><code id=scroll-y></code></td>
        </tr>
        <tr>
            <td><code>$.rectangle(a).top</code></td>
            <td><code>number</code></td>
            <td><code id=top></code></td>
        </tr>
        <tr>
            <td><code>$.rectangle(a).bottom</code></td>
            <td><code>number</code></td>
            <td><code id=bottom></code></td>
        </tr>
        <tr>
            <td><code>$.rectangle(a).left</code></td>
            <td><code>number</code></td>
            <td><code id=left></code></td>
        </tr>
        <tr>
            <td><code>$.rectangle(a).right</code></td>
            <td><code>number</code></td>
            <td><code id=right></code></td>
        </tr>
        <tr>
            <td><code>$.rectangle(a).width</code></td>
            <td><code>number</code></td>
            <td><code id=width></code></td>
        </tr>
        <tr>
            <td><code>$.rectangle(a).height</code></td>
            <td><code>number</code></td>
            <td><code id=height></code></td>
        </tr>
        <tr class="offset">
            <td><code>$.offset(a).top</code></td>
            <td><code>number</code></td>
            <td><code id=offset-top></code></td>
        </tr>
        <tr class="offset">
            <td><code>$.offset(a).bottom</code></td>
            <td><code>number</code></td>
            <td><code id=offset-bottom></code></td>
        </tr>
        <tr class="offset">
            <td><code>$.offset(a).left</code></td>
            <td><code>number</code></td>
            <td><code id=offset-left></code></td>
        </tr>
        <tr class="offset">
            <td><code>$.offset(a).right</code></td>
            <td><code>number</code></td>
            <td><code id=offset-right></code></td>
        </tr>
        <tr class="offset">
            <td><code>$.offset(a).width</code></td>
            <td><code>number</code></td>
            <td><code id=offset-width></code></td>
        </tr>
        <tr class="offset">
            <td><code>$.offset(a).height</code></td>
            <td><code>number</code></td>
            <td><code id=offset-height></code></td>
        </tr>
        <tr>
            <td><code>$.inViewport(b, <span class=number>100</span>)</code></td>
            <td><code>boolean</code></td>
            <td><code id=in-viewport-b-pos></code></td>
        </tr>
        <tr>
            <td><code>$.inViewport(b)</code></td>
            <td><code>boolean</code></td>
            <td><code id=in-viewport-b></code></td>
        </tr>
        <tr>
            <td><code>$.inViewport(b, <span class=number>-100</span>)</code></td>
            <td><code>boolean</code></td>
            <td><code id=in-viewport-b-neg></code></td>
        </tr>
    </table>
    
    <div id="b"><pre>div#b</pre></div>
    <div id="c"><pre>div#c</pre></div>

    <footer id="footer">
        <nav>
            <ul>
                <li><a href="#header" title="up" accesskey=a><span class=shape>&#9650;</span></a>
                <li><a href="https://github.com/ryanve/verge" title="view repo" accesskey=1>Github</a>
                <li><a href="https://github.com/ryanve/verge/issues" title="report an issue" accesskey=9>Issue?</a>
                <li><a href="#footer" title="down" accesskey=z>&#9660;</a>
            </ul>
        </nav>

    </footer>

    <!-- accesskeys: 
        1: homepage
        a: jump to top 
        z: jump to bottom 
        s: skip to main content
    -->
    
    <!--<a id="toggle" title="Toggle styles" accesskey="2">&#0926;</a>-->

    <!-- Other libraries to test integration with:
         http://airve.github.com/js/jeesh/jeesh.min.js
         http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js
    -->
    <script src="http://airve.github.com/js/elo/elo.min.js"></script>
    <script src="http://airve.github.com/js/dj/dj.min.js"></script>
    <script src="verge.js"></script><!-- github.com/ryanve/verge  -->

    <script>
    (function (window, document, console, dj, verge, elo, vibe) {

        var docElem = document.documentElement
          , $ = window.$ || elo
          , toString = {}.toString
          , hasConsole = !!(console && console.log)
          , log = hasConsole ? function (s) {
                console.log(s); 
            } : function (s, force) { 
                force && alert(s); 
            }
          , id = function (id) {
                return document.getElementById(id);
            }
          , html = function (el, html) {
                el && 1 === el.nodeType && (el.innerHTML = html || '');
            };

        var readyTests = {}   // tests that need to happen on *ready*
          , resizeTests = {}  // tests that need to happen on *resize*
          , scrollTests = {}  // tests that need to happen on *scroll*
          , dynamicTests = {} // tests that need to happen on *resize* AND *scroll*
          , a, b, c, d, $a, $b, $c, $d; // elements (native and wrapped)

        if ( verge.bridge ) {
            verge.bridge($, true);
        } else {
            $.inX = verge.inX;
            $.inY = verge.inY;
            $.inViewport = verge.inViewport;
            $.scrollX = verge.scrollX;
            $.scrollY = verge.scrollY;
            $.viewportW = verge.viewportW;
            $.viewportH = verge.viewportH;
            $.rectangle = verge.rectangle;
        }
        

        function update(tests) {
            var n, output, el;
            for ( n in tests ) {
                if ( el = id(n) ) {
                    output = tests[n];
                    output = typeof output == 'function' ? output() : output;
                    html( el, '' + output );
                }
            }
        }
        
        function aug ( receiver, supplier, force ) {
            for ( var n in supplier ) {
                if ( force || (null == receiver[n] && null != supplier[n]) ) {
                    receiver[n] = supplier[n];
                }
            }
            return receiver;
        }

        // print the ua
        readyTests['ua'] = navigator.userAgent || '';
        
        // TESTS:

        resizeTests['viewport-w'] = $.viewportW;
        resizeTests['viewport-h'] = $.viewportH;
        scrollTests['scroll-x']   = $.scrollX;
        scrollTests['scroll-y']   = $.scrollY;
        
        if ( $.rectangle ) {
            dynamicTests['top']       = function() { return $.rectangle(a).top; };
            dynamicTests['bottom']    = function() { return $.rectangle(a).bottom; };
            dynamicTests['left']      = function() { return $.rectangle(a).left; };
            dynamicTests['right']     = function() { return $.rectangle(a).right; };
            dynamicTests['width']     = function() { return $.rectangle(a).width; };
            dynamicTests['height']    = function() { return $.rectangle(a).height; };
        }
        
        if ( $.offset ) {
            dynamicTests['offset-top']       = function() { return $.offset(a).top; };
            dynamicTests['offset-bottom']    = function() { return $.offset(a).bottom; };
            dynamicTests['offset-left']      = function() { return $.offset(a).left; };
            dynamicTests['offset-right']     = function() { return $.offset(a).right; };
            dynamicTests['offset-width']     = function() { return $.offset(a).width; };
            dynamicTests['offset-height']    = function() { return $.offset(a).height; };        
        }
        
        dynamicTests['in-viewport-a']      = function() { return $.inViewport(a); };
        dynamicTests['in-viewport-a-pos']  = function() { return $.inViewport(a, 100); };
        dynamicTests['in-viewport-a-neg']  = function() { return $.inViewport(a, -100); };
        dynamicTests['in-viewport-b']      = function() { return $.inViewport(b); };
        dynamicTests['in-viewport-b-pos']  = function() { return $.inViewport(b, 100); };
        dynamicTests['in-viewport-b-neg']  = function() { return $.inViewport(b, -100); };
        
        // Merge tests by event:
        aug(resizeTests, dynamicTests);
        aug(scrollTests, dynamicTests);
        aug(readyTests, scrollTests);
        aug(readyTests, resizeTests);
        
        // Print test outputs:
        elo.domReady(function (elo) { 
            $a = $('#a'); 
            $b = $('#b'); 
            $c = $('#c'); 
            a = $a[0];
            b = $b[0];
            c = $c[0];
            $abc = $([a,b,c]);
            update(readyTests); 
            log( $.viewportW() );
            log( verge );
            $a.rectangle && log( $a.rectangle() );
            log( $.rectangle(a) );
            log( dj.resample(elo) );
        });
        
        elo(window).on('resize', function () { 
            update(resizeTests); 
        }).on('scroll', function () {
            update(scrollTests); 
        });
        
        //vibe && elo('#toggle').on('click', function () {
        //    vibe.toggleClass(docElem, 'dark');
        //});

    }(this, this.document, this.console, this.dj, this.verge, this.elo, this.vibe));
    </script>
</body> 
</html>